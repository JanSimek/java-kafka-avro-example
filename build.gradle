plugins {
    id 'java'
}

group 'com.example'
version '1.0-SNAPSHOT'

allprojects {
    apply plugin:'java'

    sourceCompatibility = 1.8

    repositories {
        mavenCentral()
    }

    dependencies {
        compile group: 'org.apache.kafka', name: 'kafka_2.12', version: '2.1.0'
        compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
        compile group: 'org.apache.avro', name: 'avro', version: '1.8.2'

        testCompile group: 'junit', name: 'junit', version: '4.12'
    }
}

//task jarConsumer(type: Jar) {
//    baseName = "consumer"
//    exclude "**/Producer.java"
//    from sourceSets.main.output,
//            configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
//    manifest {
//        attributes("Main-Class": "com.example.avrokafka.consumer.Consumer" )
//    }
//}

//task jarProducer(type: Jar) {
//    baseName = "producer"
//    exclude "**/Consumer.java"
//    from sourceSets.main.output,
//            configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
//    manifest {
//        attributes("Main-Class": "com.example.avrokafka.producer.Producer" )
//    }
//}

//jar.dependsOn(jarConsumer, jarProducer)